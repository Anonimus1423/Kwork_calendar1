(()=>{"use strict";let e=null,t={year:1999,month:"Октябрь",day:null},n={year:2023,month:"Сентябрь",day:null};function d(e){let t=new Date(Date.UTC(e.year,g.findIndex((t=>t===e.month))+1-1,e.day||1));return null===e.day&&(t.getDate=function(){return null}),t}function a(e,t,n){const d=document.getElementById(e),a=document.getElementById(t);for(;a.firstChild;)a.removeChild(a.firstChild);let o=(new Date).getFullYear();for(;o>Number(d?.innerHTML);){const d=document.createElement("li"),m=document.createElement("p");d.addEventListener("click",l.bind(window,d,e,t,"year",n)),m.innerHTML=o,d.appendChild(m),a?.appendChild(d),o--}for(o=0;o<=15;o++){const m=document.createElement("li"),s=document.createElement("p");m.addEventListener("click",l.bind(window,m,e,t,"year",n)),s.innerHTML=Number(d?.innerHTML)-o,m.appendChild(s),a?.appendChild(m)}}function l(e,a,l,m,s){document.getElementById(a).innerHTML=e.innerHTML,o(l,l+"-img"),1===s?t[m]=e.querySelector("p").textContent:n[m]=e.querySelector("p").textContent,I(d(t),d(n))}function o(t,n){e!==t&&(document.getElementById("month-selector").classList.remove("active"),document.getElementById("year-selector").classList.remove("active"),document.getElementById("month-2-selector").classList.remove("active"),document.getElementById("year-2-selector").classList.remove("active"),document.getElementById("month-selector-img").classList.remove("active"),document.getElementById("year-selector-img").classList.remove("active"),document.getElementById("month-2-selector-img").classList.remove("active"),document.getElementById("year-2-selector-img").classList.remove("active")),document.getElementById(n)?.classList.toggle("active"),document.getElementById(t)?document.getElementById(t).classList.toggle("active"):t.classList.toggle("active"),e=t}function m(e,d){let a=t.day,l=n.day,o=document.getElementsByClassName("calendar__item-"+d);if(1===d?t.day=Number(e.querySelector("p").textContent):n.day=Number(e.querySelector("p").textContent),function(e){return 1===e?u()[0]>u()[1]&&null!==t.day&&null!==n.day?(document.getElementById("error-message").textContent="Дата начала периода ппревиышает дату окончания",!1):(document.getElementById("error-message").textContent="",!0):2===e?u()[0]>u()[1]&&null!==t.day&&null!==n.day?(document.getElementById("error-message-2").textContent="Дата начала периода ппревиышает дату окончания",!1):(document.getElementById("error-message-2").textContent="",!0):void 0}(d)){for(let e=0;e<o.length;e++)o[e].classList.remove("selected");e.classList.add("selected")}else t.day=a,n.day=l}function s(){const e=document.getElementById("date-input-1"),d=document.getElementById("date-input-2");e.placeholder="",d.placeholder="",null!==t.day?(e.value=t.day+" "+t.month+" "+t.year,e.classList.add("active"),document.getElementById("date-input-container-1").classList.add("active")):(e.classList.remove("active"),document.getElementById("date-input-container-1").classList.remove("active"),e.value=""),null!==n.day?(d.value=n.day+" "+n.month+" "+n.year,d.classList.add("active"),document.getElementById("date-input-container-2").classList.add("active")):(d.classList.remove("active"),document.getElementById("date-input-container-2").classList.remove("active"),d.value="")}function r(e,a){if(1===a){const n=e.value.split(".");t.day=Number(n[0]),t.month=g[Number(n[1])-1],t.year=Number(n[2])}else{const t=e.value.split(".");n.day=Number(t[0]),n.month=g[Number(t[1])-1],n.year=Number(t[2])}I(d(t),d(n),!0,!0),u()[0]>u()[1]&&null!==t.day&&null!==n.day&&(document.getElementById("error-message-2").textContent="Дата начала периода ппревиышает дату окончания")}function i(){document.getElementById("date-input-container-1").addEventListener("submit",(function(e){e.preventDefault()})),document.getElementById("date-input-container-2").addEventListener("submit",(function(e){e.preventDefault()}))}function c(e,d){1===e?(u()[0]+1/13>u()[1]?(document.getElementById("next-month-button").classList.add("disabled"),document.getElementById("prev-month-button-2").classList.add("disabled")):(document.getElementById("next-month-button").classList.remove("disabled"),document.getElementById("prev-month-button-2").classList.remove("disabled")),u()[0]+1>u()[1]?(document.getElementById("next-year-button").classList.add("disabled"),document.getElementById("prev-year-button-2").classList.add("disabled")):(document.getElementById("next-year-button").classList.remove("disabled"),document.getElementById("prev-year-button-2").classList.remove("disabled")),d?document.getElementById("next-year-button-2").classList.add("disabled"):document.getElementById("next-year-button-2").classList.remove("disabled"),0===g.findIndex((e=>e===t.month))?document.getElementById("prev-month-button").classList.add("disabled"):document.getElementById("prev-month-button").classList.remove("disabled"),11===g.findIndex((e=>e===t.month))?document.getElementById("next-month-button").classList.add("disabled"):document.getElementById("next-month-button").classList.remove("disabled")):(u()[0]>u()[1]-1/13?(document.getElementById("next-month-button").classList.add("disabled"),document.getElementById("prev-month-button-2").classList.add("disabled")):(document.getElementById("next-month-button").classList.remove("disabled"),document.getElementById("prev-month-button-2").classList.remove("disabled")),u()[0]>u()[1]-1?(document.getElementById("next-year-button").classList.add("disabled"),document.getElementById("prev-year-button-2").classList.add("disabled")):(document.getElementById("next-year-button").classList.remove("disabled"),document.getElementById("prev-year-button-2").classList.remove("disabled")),d?document.getElementById("next-year-button-2").classList.add("disabled"):document.getElementById("next-year-button-2").classList.remove("disabled"),0===g.findIndex((e=>e===n.month))?document.getElementById("prev-month-button-2").classList.add("disabled"):document.getElementById("prev-month-button-2").classList.remove("disabled"),11===g.findIndex((e=>e===n.month))?document.getElementById("next-month-button-2").classList.add("disabled"):document.getElementById("next-month-button-2").classList.remove("disabled"))}function u(){const e=+document.getElementById("year").innerHTML,d=+document.getElementById("year-2").innerHTML,a=g.findIndex((e=>e===document.getElementById("month").innerHTML))+1,l=g.findIndex((e=>e===document.getElementById("month-2").innerHTML))+1;return[e+a/13+t.day/356,d+l/13+n.day/356]}const g=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];let y=document.getElementById("calendar-days"),E=document.getElementById("calendar-days-2");function I(e,t,n=!0,d=!0){let l=0,o=1,s=1;const r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),0)),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),0));for(document.getElementById("year-2").innerHTML=t.getFullYear(),document.getElementById("month-2").innerHTML=g[t.getMonth()],document.getElementById("year").innerHTML=e.getFullYear(),document.getElementById("month").innerHTML=g[e.getMonth()];E.firstChild;)E.removeChild(E.firstChild);for(;y.firstChild;)y.removeChild(y.firstChild);for(;l<=41;){l++,L(t.getFullYear(),t.getMonth()+1)+i.getDay()+1&&i.getDay();const a=document.createElement("div"),c=document.createElement("div");if(a.classList.add("calendar__item"),c.classList.add("calendar__item"),a.classList.add("calendar__item-1"),c.classList.add("calendar__item-2"),l<L(t.getFullYear(),t.getMonth()+1)+i.getDay()+1&&l>i.getDay()){c.classList.add("active");const e=document.createElement("p");e.innerHTML=o,o===t.getDate()&&n&&c.classList.add("selected"),c.appendChild(e),o++,c.addEventListener("click",(function(){m(c,2)}))}if(l<L(e.getFullYear(),e.getMonth()+1)+r.getDay()+1&&l>r.getDay()){a.classList.add("active");const t=document.createElement("p");t.innerHTML=s,s===e.getDate()&&d&&a.classList.add("selected"),a.appendChild(t),s++,a.addEventListener("click",(function(){m(a,1)}))}L(t.getFullYear(),t.getMonth()+1)+i.getDay()+1<37&&l>35||E?.appendChild(c),L(e.getFullYear(),e.getMonth()+1)+r.getDay()+1<37&&l>35||y?.appendChild(a)}a("year","year-selector",1),a("year-2","year-2-selector",2)}function L(e,t){return new Date(Date.UTC(e,t,0)).getDate()}let v=new Date(Date.UTC(1999,9,1)),B=new Date(Date.UTC(1999,10,1));!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),I(v,B,0,0),i(),window.dateFormSubmit=i,window.nullDate=function(e){null===n.day&&1===e||null===t.day&&2===e?(n.day=null,t.day=null,I(d(t),d(n),0,0)):(1===e&&(t.day=null,document.getElementById("error-message")&&(document.getElementById("error-message").textContent=""),I(d(t),d(n),!0,0)),2===e&&(n.day=null,document.getElementById("error-message-2")&&(document.getElementById("error-message-2").textContent=""),I(d(t),d(n),0,!0))),s()},window.submitDate=s,window.hideCalendars=function(){document.getElementById("calendars").classList.remove("active"),"ДД.ММ.ГГГГ"===document.getElementById("date-input-1").placeholder&&(document.getElementById("date-input-1").placeholder="",document.getElementById("date-input-2").placeholder="",document.getElementById("date-input-1").value="",document.getElementById("date-input-2").value="")},window.showCalendars=function(){document.getElementById("calendars").classList.add("active"),document.getElementById("date-input-1").placeholder="ДД.ММ.ГГГГ",document.getElementById("date-input-2").placeholder="ДД.ММ.ГГГГ"},window.nextMonth=function(e,a){const l=new Date,o=document.getElementById(e);1===a&&u()[0]+1/13>u()[1]||!g[g.findIndex((e=>e===o.innerHTML))+1]||(o.innerHTML=g[g.findIndex((e=>e===o.innerHTML))+1],1===a?t.month=o.innerHTML:n.month=o.innerHTML,I(d(t),d(n)),c(a,+Number(document.getElementById("year-2").innerHTML)+1>l.getFullYear()))},window.prevMonth=function(e,a){const l=new Date,o=document.getElementById(e);2===a&&u()[0]>u()[1]-1/13||!g[g.findIndex((e=>e===o.innerHTML))-1]||(o.innerHTML=g[g.findIndex((e=>e===o.innerHTML))-1],1===a?t.month=o.innerHTML:n.month=o.innerHTML,I(d(t),d(n)),c(a,+Number(document.getElementById("year-2").innerHTML)+1>l.getFullYear()))},window.prevYear=function(e,a){const l=new Date,o=document.getElementById(e);2===a&&u()[0]>u()[1]-1||(o.innerHTML=Number(o.innerHTML)-1,1===a?t.year=o.innerHTML:n.year=o.innerHTML,I(d(t),d(n)),c(a,+Number(document.getElementById("year-2").innerHTML)+1>l.getFullYear()))},window.nextYear=function(e,a){const l=new Date,o=document.getElementById(e);Number(o.innerHTML)+1>l.getFullYear()||1===a&&u()[0]+1>u()[1]||(o.innerHTML=Number(o.innerHTML)+1,1===a?t.year=o.innerHTML:n.year=o.innerHTML,I(d(t),d(n),0,0),c(a,+Number(document.getElementById("year-2").innerHTML)+1>l.getFullYear()))},window.changeYear=l,window.toggleSelector=o,document.getElementById("date-input-1").addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>8&&(t=t.substring(0,8)),t.length>2&&(t=t.substring(0,2)+"."+t.substring(2)),t.length>5&&(t=t.substring(0,5)+"."+t.substring(5)),e.target.value=t})),document.getElementById("date-input-1").addEventListener("change",(function(e){const t=new Date(e.target.value.split(".").reverse().join("-"));t>new Date?document.getElementById("error-message").textContent="Выбирите дату не позднее сегодняшнего дня":10!==e.target.value.length?document.getElementById("error-message").textContent="Неправильная длина строки":"Invalid Date"==t?document.getElementById("error-message").textContent="Не правильная дата":(document.getElementById("error-message").textContent="",r(document.getElementById("date-input-1"),1),s())})),document.getElementById("date-input-2").addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>8&&(t=t.substring(0,8)),t.length>2&&(t=t.substring(0,2)+"."+t.substring(2)),t.length>5&&(t=t.substring(0,5)+"."+t.substring(5)),e.target.value=t})),document.getElementById("date-input-2").addEventListener("change",(function(e){const t=new Date(e.target.value.split(".").reverse().join("-"));t>new Date?document.getElementById("error-message-2").textContent="Выбирите дату не позднее сегодняшнего дня":10!==e.target.value.length?document.getElementById("error-message-2").textContent="Неправильная длина строки":"Invalid Date"==t?document.getElementById("error-message-2").textContent="Не правильная дата":(document.getElementById("error-message-2").textContent="",r(document.getElementById("date-input-2"),2),s())}))})();